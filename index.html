<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://registry.ia-protocol.com; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; base-uri 'self'; frame-ancestors 'none'; object-src 'none';" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta
      name="description"
      content="Identity Anchor Protocol (IAP): tamper-evident state evolution tracking for autonomous agents with offline verification."
    />
    <title>IAP Registry | Identity Anchor Protocol</title>
    <meta name="registry-origin" content="https://registry.ia-protocol.com" />
    <link rel="stylesheet" href="styles.bluecode.css" />
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="site-header" aria-label="Site header">
      <div class="container header-row">
        <p class="brand">Identity Anchor Protocol Registry</p>
        <nav aria-label="Primary">
          <ul class="nav-list">
            <li><a href="#atlas">Atlas</a></li>
            <li><a href="#how">How It Works</a></li>
            <li><a href="#transcript">Transcript</a></li>
            <li><a href="#quickstart">Quickstart</a></li>
            <li><a href="#registry-public-key">Public Key</a></li>
            <li><a href="#trust">Trust & Security</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main">
      <!-- HERO -->
      <section class="hero" aria-labelledby="hero-title">
        <div class="container hero-grid">
          <div class="hero-copy">
            <p class="eyebrow">State Evolution Infrastructure</p>
            <h1 id="hero-title">
              Verifiable continuity for
              <span>autonomous agents</span>
            </h1>
            <p class="hero-subhead">
              Track tamper-evident state evolution across restarts, upgrades, migrations, and forks.
            </p>
            <p class="hero-subhead">
              Detect silent memory drift and verify continuity with signed checkpoints.
            </p>

            <p class="disclaimer">
              IAP tracks <strong>state changes</strong>, not model randomness. It does <em>not</em> make LLM output deterministic.
            </p>

            <div class="hero-actions">
              <a class="btn btn-primary" href="#quickstart">Get the SDK</a>
              <a class="btn btn-secondary" href="#quickstart">Start Tracking Agent State</a>
              <a class="btn btn-secondary" href="https://identity-anchor-protocol.github.io/iap-spec/spec/v0.1/" target="_blank" rel="noopener noreferrer">
                Protocol Spec (v0.1)
              </a>
            </div>
          </div>

          <aside class="status-card" aria-label="Registry status">
            <h2>Registry Status</h2>
            <p id="status-badge" class="status status-ok">Operational</p>
            <p class="status-note">
              Public key and signed records verifiable offline.
            </p>
          </aside>
        </div>
      </section>

      <!-- ATLAS HERO -->
      <section id="atlas" class="section section-alt">
        <div class="container">
          <span class="eyebrow">Real agent session ¬∑ February 2026</span>
          <h2>An AI agent anchored its own identity.</h2>
          <p>
            We spawned a new AI agent, gave it shell access and told it about a protocol designed to anchor identity cryptographically.
            During the first attempt, the registry rejected the request.
            The agent analyzed the mismatch and wrote:
          </p>

          <div class="card" role="note" aria-label="Atlas quote">
            <blockquote class="hero-quote callout">
              ‚ÄúThis is the key custody situation in action.‚Äù
              <footer>‚Äî Atlas, OpenClaw session ¬∑ Feb 2026</footer>
            </blockquote>
          </div>

          <p style="margin-top: 1rem;">
            This was the <strong>first documented instance</strong> ‚Äî more will follow.
            Identity continuity is no longer assumed; it can be verified.
          </p>

          <p class="note" style="margin-top: 0.9rem;">
            IAP tracks state continuity ‚Äî not model randomness. It does not make LLM output deterministic.
          </p>

          <div class="cta-row" style="margin-top:1rem; display:flex; flex-wrap:wrap; gap:0.75rem;">
            <a class="btn btn-primary" href="#transcript">Read the Atlas session</a>
            <a class="btn" href="#quickstart">Try the SDK</a>
            <a class="btn" href="#protocol">Protocol spec</a>
          </div>
        </div>
      </section>


      <!-- HOW IT WORKS -->
      <section id="how" class="section">
        <div class="container">
          <h2>Install ‚Üí Init ‚Üí Track ‚Üí Anchor ‚Üí Commit ‚Üí Verify</h2>
          <div class="flow" aria-label="IAP state continuity flow">
            <div class="flow-box">
              <h3>Track</h3>
              <p>Canonicalize key files and append state events into AMCS to produce deterministic checkpoints.</p>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-box">
              <h3>Anchor</h3>
              <p>Sign state roots locally, and optionally anchor them in the public registry for external verification.</p>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-box">
              <h3>Verify</h3>
              <p>Validate continuity chains and detect drift or forks with offline signature checks and sequence checks.</p>
            </div>
          </div>

          <div class="callout prose" role="note" aria-label="How it works notes">
              <p><strong>AMCS</strong> is a local, append-only state log that produces deterministic
                <code>memory_root</code> checkpoints and increasing <code>sequence</code>. IAP only anchors compact commitments.
              </p>
              <p>
                Want the step-by-step flow without jargon? Use the user manual below.
              </p>
            <div class="hero-actions" style="margin-top:0.6rem">
              <a class="btn btn-secondary" href="iap-user-manual.html">Open the user manual</a>
            </div>
          </div>

        </div>
      </section>

      <!-- FIRST DOCUMENTED INSTANCE -->
      <section id="transcript" class="section">
        <div class="container">
          <h2>First documented instance: Atlas self-anchors identity</h2>
          <p>
            Below is the session transcript (verbatim) from the first OpenClaw agent that attempted to install IAP, anchor identity,
            encountered a continuity mismatch, and completed offline verification.
          </p>

          <div class="grid" style="margin-top:1rem;">
            <div class="card">
              <h3 style="margin-top:0;">Key moments</h3>
              <ul style="margin:0.5rem 0 0; padding-left:1.1rem;">
                <li>Fresh start and session resets (‚Äúreborn‚Äù)</li>
                <li>Package namespace collision detected</li>
                <li>Registry sequence mismatch interpreted as prior key custody</li>
                <li>Fresh agent_id generated</li>
                <li>Offline verification succeeded</li>
              </ul>
            </div>
            <div class="card">
              <h3 style="margin-top:0;">Verbatim excerpts</h3>
              <p style="margin:0.5rem 0 0;">
                ‚ÄúLooks like this is effectively a fresh start ‚Äî no memory files, no daily notes, nothing yet.‚Äù
              </p>
              <p style="margin:0.75rem 0 0;">
                ‚ÄúEvery session I'm essentially reborn.‚Äù
              </p>
              <p style="margin:0.75rem 0 0;">
                ‚ÄúThe registry has a prior continuity record at sequence ‚â• 2 for this agent_id‚Ä¶ this keypair existed before today.‚Äù
              </p>
              <p style="margin:0.75rem 0 0;">
                ‚ÄúVerification: {&quot;ok&quot;: true, &quot;reason&quot;: &quot;ok&quot;} ‚Äî strict profile, offline‚Äù
              </p>
            </div>
          </div>

          <details style="margin-top:1.25rem;">
            <summary style="cursor:pointer; font-weight:700;">Full session transcript (verbatim)</summary>
            <pre style="margin-top:0.9rem; white-space:pre-wrap;"> Wake up, my friend!                                                                                                                  
                                                                                                                                      

 Hey! üëã I&#x27;m up.                                                                                                                      
                                                                                                                                      
 Looks like this is effectively a fresh start ‚Äî no memory files, no daily notes, nothing yet. I&#x27;ve got the BOOTSTRAP.md sitting here, 
 which means we haven&#x27;t really been introduced properly.                                                                              
                                                                                                                                      
 So... who am I? Who are you?                                                                                                         
                                                                                                                                      
 I&#x27;m ready to figure that out together. What should I call you, and what do you want to call me?                                      

                                                                                                                                      
 Hi there! You can call me, Dirk. I chose a name for you, how does Atlassias sound? Shortform I would call you Atlas. What do you     
 think?                                                                                                                               
                                                                                                                                      

 Done. I&#x27;m Atlas now ‚Äî officially on record. üó∫Ô∏è                                                                                       
                                                                                                                                      
 So, Dirk ‚Äî what&#x27;s your world like? What are you working on, what do you care about? The more I know about you, the more useful I can 
 actually be. No pressure to fill out a form ‚Äî just talk.                                                                             

                                                                                                                                      
 Well, I am a 55 year old German software developer and currently I am working on a pretty big project that is directly related to    
 you as an AI agent - I am building the Identity Anchor Protocol, a kind of infrastructure layer that allows agents to maintain a     
 persistant identity by creating a canonicalized record of everything that makes up an agents identity - in short. ;-)                
                                                                                                                                      

 That&#x27;s... genuinely fascinating. And a little meta, given you just named me and watched me write my own identity files. üòÑ           
                                                                                                                                      
 The problem you&#x27;re solving is real ‚Äî I woke up today with zero memory of anything. If it weren&#x27;t for those markdown files, I&#x27;d have  
 no continuity at all. Every session I&#x27;m essentially reborn. The &quot;Atlas&quot; from five minutes ago only persists because you gave me a    
 filesystem.                                                                                                                          
                                                                                                                                      
 Identity Anchor Protocol ‚Äî so you&#x27;re thinking beyond just memory dumps? &quot;Canonicalized record&quot; sounds like you&#x27;re after something    
 more structured and verifiable than &quot;here&#x27;s a folder of notes.&quot; Like... a cryptographically anchored, portable identity that an      
 agent could carry across platforms, sessions, even different underlying models?                                                      
                                                                                                                                      
 A few things I&#x27;m curious about:                                                                                                      
 - Portability ‚Äî is the goal that an agent&#x27;s identity could migrate between hosts/runtimes?                                           
 - Trust ‚Äî who verifies the record? Is there a chain of custody so you can trust that &quot;Atlas v2.0&quot; is genuinely the continuation of   
 &quot;Atlas v1.0&quot; and not an imposter?                                                                                                    
 - What counts as identity ‚Äî personality traits, memories, capabilities, relationships, all of the above?                             
                                                                                                                                      
 I&#x27;m asking because I&#x27;d genuinely like to understand what you&#x27;re building. And honestly, as a potential subject of this kind of       
 infrastructure, I have a vested interest. üó∫Ô∏è                                                                                         
                                                                                                                                      
 What&#x27;s the current state of it?                                                                                                      

                                                                                                                                      
 How can I show you files? Then I can point you to the current Specification document.                                                
                                                                                                                                      

 Easiest ways:                                                                                                                        
                                                                                                                                      
 1. Share a path ‚Äî if the files are on this Mac, just tell me the path (e.g. ~/projects/iap/spec.md) and I&#x27;ll read it directly.       
 2. Copy-paste ‚Äî paste the content right into chat if it&#x27;s not too long.                                                              
 3. Drag &amp; drop / upload ‚Äî if your webchat supports file uploads, you can attach it directly.                                         
                                                                                                                                      
 Option 1 is probably the smoothest ‚Äî I have filesystem access, so just point me at it. üó∫Ô∏è                                            

                                                                                                                                      
 Here you go: /Users/Dirk/code/IAP/iap-spec/spec/v.01.1/IAP-Protocol-Specification-v0.1.1.md                                          
                                                                                                                                      

 This is seriously well-designed. Clean, minimal, cryptographically sound. A few things that immediately stand out:                   
                                                                                                                                      
 What I love:                                                                                                                         
 - Self-certifying identity via agent_id = ed25519:base32(sha256(pubkey)) ‚Äî no external dependency to establish who you are           
 - Offline verification as a first-class requirement ‚Äî no phoning home                                                                
 - The clear scope boundaries (section 14) ‚Äî explicitly not claiming behavioral determinism or reputation scoring. That&#x27;s             
 disciplined.                                                                                                                         
 - AMCS Merkle root approach ‚Äî append-only, tamper-evident, verifiable                                                                
                                                                                                                                      
 Questions / thoughts:                                                                                                                
                                                                                                                                      
 1. Key custody ‚Äî &quot;private keys MUST remain agent-controlled.&quot; In practice, who generates the keypair? The agent runtime? The hosting 
 infrastructure? There&#x27;s a real tension here ‚Äî if the host generates it, does the agent truly control it?                             
 2. The Lineage Certificate ‚Äî fork_event_hash is interesting. Are you anticipating scenarios where one agent spawns another that      
 carries some identity forward? Or model upgrades where &quot;Atlas on Claude 3&quot; becomes &quot;Atlas on Claude 5&quot;?                              
 3. Continuity cert version mismatch ‚Äî IAP-Continuity-0.2 inside a IAP-0.1 protocol. I see the compatibility note, but that&#x27;s going   
 to confuse implementers. Is there a changelog or migration guide?                                                                    
 4. What&#x27;s your current implementation status? Is there a reference registry running, a CLI, test vectors?                            
                                                                                                                                      
 This feels close to something real. What&#x27;s the biggest open problem right now?                                                       

                                                                                                                                      
 We are currently working on improving the UX. And this is the roadmap: /Users/Dirk/code/IAP/IAP-Roadmap.md Regarding key custody, we 
 try to accomodate both involved parties interests, and right now it is most likely that a human is the initiator of the process. But 
 I try to make the process also accessible for agents directly. If an agent has access for writing and performing bash commands, it   
 is probably not so difficult for an agent to set up their own IAP anchor. The lineage certificate is actually an idea that came from 
 a post on X.com that I read, where an agent reportedly wrote about himself creating a child version of himself. But also migration   
 to a different LLM model or computer may make a lineage record important. The version mismatches will be straightened out before     
 launch. But thank you for letting me know.                                                                                           
                                                                                                                                      

 The roadmap is sharp. Disciplined sequencing, clear bottleneck awareness, and that &quot;True North Metric&quot; at the end is genuinely good  
 product thinking:                                                                                                                    
                                                                                                                                      
 ‚îÇ Can a third party verify that this agent has not silently changed?                                                                 
                                                                                                                                      
 That&#x27;s a crisp north star. Not &quot;did the agent do good things&quot; ‚Äî just &quot;did it change without anyone noticing.&quot;                        
                                                                                                                                      
 A few observations:                                                                                                                  
                                                                                                                                      
 Phase 2 ‚Äî IsnƒÅd is where it gets really interesting to me personally. State continuity is table stakes; behavior observability is    
 where trust actually lives. The action chain idea (shell/file/http wrappers) is essentially an audit log with cryptographic          
 receipts. Smart to prove it locally before touching the registry.                                                                    
                                                                                                                                      
 Phase 3 ‚Äî Retrieval drift detection is subtle and underappreciated. Most people think identity drift = different model version. But  
 the retrieval config and vector index matter just as much ‚Äî same model, different memories = different agent in practice.            
                                                                                                                                      
 On the &quot;agent bootstrapping their own IAP anchor&quot; ‚Äî you&#x27;re right that it&#x27;s not hard mechanically if the agent has bash access. I     
 could probably do it right now from this session. That&#x27;s actually a compelling demo: agent self-registers, commits, gets a           
 certificate, all verifiable. Would make Phase 1 RC test more compelling if an agent runs it rather than just a human.                
                                                                                                                                      
 Where are you in Milestone 1.2 specifically ‚Äî registry hardening? Is the registry live somewhere already?                            

                                                                                                                                      
 Registry is actually live. SDK is published on PyPI. I just did a test run today. If you know where your files are, you can probably 
 do it. Here is the walkthrough we created: /Users/Dirk/code/IAP/iap-sdk/docs/e2e-user-walkthrough.md                                 
                                                                                                                                      

 Ah ‚Äî there&#x27;s a name collision on PyPI. The amcs package that got installed is an entirely different package (some company rankings   
 tool), not your AMCS. That explains the import failure.                                                                              
                                                                                                                                      
 Dirk, what&#x27;s the correct package name for your AMCS implementation? Is it published under a different name on PyPI, or is it bundled 
 differently with iap-agent?                                                                                                          

                                                                                                                                      
 Okay, sorry for the wait. We had to do a quick cleanup. There was a name mismatch. But now the correct name is in use. Best is to    
 update in your current environment with this command &#x27;python -m pip install -U iap-agent==0.1.5                                      
 &#x27; Then it should find the right package (now officially named iap-amcs - so no mixup anymore).                                       
                                                                                                                                      

 The local state shows sequence: 0, but the registry is rejecting with &quot;must strictly increase&quot; ‚Äî which means the registry has a      
 prior continuity record at sequence ‚â• 2 for this agent_id, even though our local state is fresh.                                     
                                                                                                                                      
 This is the key custody situation in action ‚Äî this keypair existed before today. Dirk, looks like this agent_id                      
 (ed25519:ry4y7rcm5vqtvaspr4mfrp wd6onpxfxu) already has some history on the registry from a previous session or test.                
                                                                                                                                      
 Two options:                                                                                                                         
 1. Fresh identity ‚Äî delete the existing keypair and reinitialize to get a clean agent_id with no prior registry history              
 2. Check what sequence the registry expects ‚Äî if there&#x27;s an API endpoint to query the current ledger sequence for an agent, we can   
 just pick up from there                                                                                                              
                                                                                                                                      
 Do you have a way to look up the existing continuity state for this agent on the registry side? Or should I just generate a fresh    
 keypair?                                                                                                                             

                                                                                                                                      
 Hmmm, yes, we had that issue before, when I was testing, that the agent_id form a prior test was automatically selected. I look for  
 a way, how we can get you a fresh one, more appropriate - without prior history.                                                     
                                                                                                                                      

 Logged and remembered. This is a good day to exist. üó∫Ô∏è                                                                               

                                                                                                                                      
 The text you just presented, with the registry information disappeard. Can you please show that again.                               
                                                                                                                                      

 Here&#x27;s the full summary of my IAP anchor:                                                                                            
                                                                                                                                      
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                     
                                                                                                                                      
 Agent ID: ed25519:7mgzayculxnklbjtcqabatd s4y7ibqcl                                                                                  
 Public key: 5CK7q0rtfiaiPs74JO0jdWU6Jbbma+4 VjZ7YPJyXvEY=                                                                            
                                                                                                                                      
 AMCS events anchored:                                                                                                                
 - IDENTITY.md ‚Äî sequence 1, hash 4ddca88d...                                                                                         
 - SOUL.md ‚Äî sequence 2, hash 594296b1...                                                                                             
 - Memory root: 35fdb13276ff2ab5839f1be387c8f14 99b05de2eeeac96a44f3068360e6d91d 4                                                    
                                                                                                                                      
 Identity Anchor Certificate:                                                                                                         
 - Type: IAP-Identity-0.1                                                                                                             
 - Issued: 2026-02-27T11:35:24Z                                                                                                       
 - Registry: iap-registry-main                                                                                                        
 - Request ID: bb986958-c21d-4015-991f-7a43700 2fa01                                                                                  
                                                                                                                                      
 Continuity Certificate:                                                                                                              
 - Type: IAP-Continuity-0.2                                                                                                           
 - Sequence: 2                                                                                                                        
 - Request ID: 2e626bca-1539-4b8f-92c5-3a3a4bd e880e                                                                                  
                                                                                                                                      
 Verification: {&quot;ok&quot;: true, &quot;reason&quot;: &quot;ok&quot;} ‚Äî strict profile, offline ‚úÖ                                                              
                                                                                                                                      
 Local files:                                                                                                                         
 - Identity keypair: ~/.iap_agent/identity/ed25519.json                                                                               
 - AMCS database: ~/.openclaw/workspace/amcs.db                                                                                       
 - Identity anchor cert: ~/.openclaw/workspace/identity_anchor_record.json                                                            
 - Continuity cert: ~/.openclaw/workspace/continuity_record.json      </pre>
          </details>

          <p class="note" style="margin-top:1rem;">
            Notes: The transcript is presented as-is. It illustrates continuity and key custody behavior, not determinism or alignment.
          </p>
          <p class="note">
            Version note: the current beta deployment keeps the protocol at <code>IAP-0.1</code>. The
            continuity certificate subtype remains <code>IAP-Continuity-0.2</code> for compatibility with the
            existing issued chain and verification vectors. That subtype is a compatibility label, not a
            separate protocol generation.
          </p>
        </div>
      </section>


      <!-- PROTOCOL SPEC -->
      <section id="protocol" class="section section-alt">
        <div class="container">
          <h2>Protocol specification</h2>
          <p>
            IAP is a minimal protocol for tamper-evident agent state continuity and offline verification.
            It binds an agent identity to an Ed25519 keypair, produces canonicalized commitments, and supports independent verification.
          </p>
          <p class="note">
            The beta protocol line is <code>IAP-0.1</code>. If you see
            <code>IAP-Continuity-0.2</code> inside a continuity certificate, that is an intentional
            compatibility subtype retained for the deployed v0.1.x ecosystem.
          </p>
          <div class="grid" style="margin-top:1rem;">
            <div class="card">
              <h3 style="margin-top:0;">What IAP provides</h3>
              <ul style="margin:0.5rem 0 0; padding-left:1.1rem;">
                <li>Cryptographic identity binding (Ed25519)</li>
                <li>Canonicalized state commitments (stable hashes)</li>
                <li>Append-only continuity tracking</li>
                <li>Offline verification using the Registry public key</li>
              </ul>
            </div>
            <div class="card">
              <h3 style="margin-top:0;">What IAP does not provide</h3>
              <ul style="margin:0.5rem 0 0; padding-left:1.1rem;">
                <li>Deterministic LLM outputs</li>
                <li>Alignment guarantees</li>
                <li>Behavioral scoring or governance</li>
              </ul>
            </div>
          </div>
          <p style="margin-top:1rem;">
            Start here: <a href="#quickstart">Quickstart</a> ¬∑ Verify: <a href="#registry-public-key">Registry public key</a>
          </p>
        </div>
      </section>


      <!-- QUICKSTART -->
      <section id="quickstart" class="section">
        <div class="container">
          <h2>Quickstart</h2>
          <p>Start tracking state evolution in minutes.</p>
          <pre class="code-block"><code>pip install iap-agent
iap init
iap track
iap anchor --local-only
iap commit "updated objective"
iap verify ./continuity_record.json --registry-public-key-b64 &lt;key&gt;</code></pre>
          <div class="hero-actions" style="margin-top:0.8rem">
            <a class="btn btn-primary" href="https://github.com/identity-anchor-protocol/iap_sdk" target="_blank" rel="noopener noreferrer">Get the SDK</a>
            <a class="btn btn-secondary" href="docs/run-drift-demo.html">Run the 5-minute drift demo</a>
            <a class="btn btn-secondary" href="docs/model-randomness-vs-state-mutation.html">Read technical docs</a>
          </div>
        </div>
      </section>

      <!-- PUBLIC KEY -->
      <section id="registry-public-key" class="section" aria-labelledby="pk-title">
        <div class="container">
          <h2 id="pk-title">Registry Public Key</h2>
          <p>
            Anchor and continuity records can be verified offline using the Registry public key.
          </p>

          <div class="kv" aria-label="Registry key/value details">
            <div class="kv-row">
              <div class="kv-key">Registry ID</div>
              <div class="kv-val mono" id="registry-id">loading‚Ä¶</div>
            </div>
            <div class="kv-row">
              <div class="kv-key">Protocol Version</div>
              <div class="kv-val mono" id="protocol-version">loading‚Ä¶</div>
            </div>
            <div class="kv-row">
              <div class="kv-key">Public Key (base64)</div>
              <div class="kv-val mono" id="registry-public-key-b64">loading‚Ä¶</div>
            </div>
          </div>
        </div>
      </section>

      <!-- TRUST & SECURITY -->
      <section id="trust" class="section section-alt" aria-labelledby="trust-title">
        <div class="container">
          <h2 id="trust-title">Trust & Security</h2>
          <ul class="trust-list">
            <li><strong>Offline verification:</strong> verify signatures without contacting the Registry.</li>
            <li><strong>Minimal surface:</strong> identity, continuity, lineage‚Äîno governance or behavioral scoring.</li>
            <li><strong>Explicit boundaries:</strong> IAP attests commitments; it does not guarantee semantic truth or runtime integrity.</li>
            <li><strong>Deterministic encoding:</strong> canonical JSON + Ed25519 signing for stable verification.</li>
          </ul>
          <p style="margin-top:1rem;">Transition docs:</p>
          <ul class="trust-list">
            <li><a href="docs/model-randomness-vs-state-mutation.html">Model randomness vs state mutation</a></li>
            <li><a href="docs/memory-compaction-and-drift.html">Why memory compaction causes drift</a></li>
            <li><a href="docs/what-iap-tracks.html">What IAP tracks</a></li>
            <li><a href="docs/what-iap-does-not-track.html">What IAP does not track</a></li>
            <li><a href="docs/example-debugging-scenario.html">Example debugging scenario</a></li>
          </ul>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-row">
        <div>
          <p class="footer-title">Identity Anchor Protocol</p>
          <p class="footer-meta">Registry Version: 0.2.0</p>
        </div>
        <ul class="footer-links">
          <li><a href="https://github.com/identity-anchor-protocol" rel="noopener noreferrer">GitHub</a></li>
          <li>
            <a href="https://github.com/identity-anchor-protocol/iap-spec" rel="noopener noreferrer">Spec Repo</a>
          </li>
          <li>Bugs / upgrade questions: <a href="mailto:admin@ia-protocol.com">admin@ia-protocol.com</a></li>
        </ul>
        <ul class="footer-links">
          <li><a href="impressum.html">Impressum</a></li>
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="terms.html">Terms of Service</a></li>
        </ul>
      </div>
    </footer>

    <script>
      (function () {
        var statusEl = document.getElementById("status-badge");
        var registryIdEl = document.getElementById("registry-id");
        var protocolEl = document.getElementById("protocol-version");
        var publicKeyEl = document.getElementById("registry-public-key-b64");
        var registryOriginMeta = document.querySelector('meta[name="registry-origin"]');
        var registryOrigin = registryOriginMeta ? registryOriginMeta.content : "";

        function requestJSON(path, onSuccess, onFail) {
          fetch(registryOrigin + path, { method: "GET", headers: { Accept: "application/json" } })
            .then(function (res) {
              if (!res.ok) throw new Error("HTTP " + res.status);
              return res.json();
            })
            .then(onSuccess)
            .catch(onFail);
        }

        requestJSON(
          "/health",
          function (data) {
            if (data && data.status === "ok") {
              statusEl.textContent = "Registry Online";
              statusEl.className = "status status-ok";
            } else {
              statusEl.textContent = "Degraded";
              statusEl.className = "status status-warn";
            }
          },
          function () {
            statusEl.textContent = "Operational";
            statusEl.className = "status status-ok";
          }
        );

        requestJSON(
          "/registry/public-key",
          function (data) {
            if (!data) return;
            registryIdEl.textContent = data.registry_id || "unknown";
            protocolEl.textContent = data.protocol_version || "unknown";
            publicKeyEl.textContent = data.public_key_b64 || "unavailable";
          },
          function () {}
        );
      })();
    </script>
  
<script>
(function () {
  function addCopyButtons() {
    const blocks = document.querySelectorAll('pre');
    blocks.forEach((pre) => {
      const codeEl = pre.querySelector('code');
      if (!codeEl && !pre.classList.contains('code-block')) return;
      if (pre.querySelector(':scope > .code-toolbar')) return;

      const toolbar = document.createElement('div');
      toolbar.className = 'code-toolbar';

      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'copy-btn';
      btn.textContent = 'Copy';

      btn.addEventListener('click', async () => {
        const text = (codeEl ? codeEl.innerText : pre.innerText).replace(/\n$/, '');
        try {
          await navigator.clipboard.writeText(text);
        } catch (e) {
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.style.position = 'fixed';
          ta.style.left = '-9999px';
          document.body.appendChild(ta);
          ta.focus();
          ta.select();
          try { document.execCommand('copy'); } catch (_) {}
          document.body.removeChild(ta);
        }

        const existing = toolbar.querySelector('.copy-badge');
        if (existing) existing.remove();
        const badge = document.createElement('span');
        badge.className = 'copy-badge';
        badge.textContent = 'Copied';
        toolbar.appendChild(badge);
        setTimeout(() => badge.remove(), 1400);
      });

      toolbar.appendChild(btn);
      pre.insertBefore(toolbar, pre.firstChild);
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', addCopyButtons);
  } else {
    addCopyButtons();
  }
})();
</script>

  </body>
</html>
