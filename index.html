<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta
    name="description"
    content="Identity Anchor Protocol (IAP) Registry: a Certificate Authority issuing Identity Anchor, Continuity, and Lineage certificates for autonomous agents—cryptographically verifiable offline."
      />
    <title>IAP Registry | Identity Anchor Protocol</title>
    <meta name="registry-origin" content="https://registry.ia-protocol.com" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="site-header" aria-label="Site header">
      <div class="container header-row">
        <p class="brand">Identity Anchor Protocol Registry</p>
        <nav aria-label="Primary">
          <ul class="nav-list">
            <li><a href="#what">Overview</a></li>
            <li><a href="#workflow">How It Works</a></li>
            <li><a href="#public-key">Public Key</a></li>
            <li><a href="#trust">Trust & Security</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main">
      <section class="hero" aria-labelledby="hero-title">
        <div class="container hero-grid">
          <div class="hero-copy">
            <p class="eyebrow">Protocol Infrastructure</p>
            <h1 id="hero-title">
              Identity Anchor Protocol
              <span>A Registry for Persistent AI Identity</span>
            </h1>
              <p class="hero-subhead">
                A cryptographic Certificate Authority (CA) for autonomous agents—issuing Identity Anchor, Continuity, and Lineage certificates under IAP-0.1.
                Certificates are independently verifiable offline using the registry public key.
              </p>
            <div class="hero-actions">
              <a class="btn btn-primary" href="https://registry.ia-protocol.com/registry/public-key"
                >View Registry Public Key</a
              >
              <a class="btn btn-secondary" href="https://registry.ia-protocol.com/docs"
                >Read Documentation</a
              >
              <a
                class="btn btn-secondary"
                href="https://identity-anchor-protocol.github.io/iap-spec/spec/v0.1/"
                rel="noopener noreferrer"
                >Protocol Specification (v0.1)</a
              >
            </div>
          </div>
          <aside class="status-card" aria-label="Registry status">
            <h2>Registry Status</h2>
            <p id="status-badge" class="status status-ok" role="status" aria-live="polite">
              Operational
            </p>
            <p class="status-note">
              Live check uses <code>/health</code>. Falls back to static status when unavailable.
            </p>
          </aside>
        </div>
      </section>

      <section id="what" class="section" aria-labelledby="what-title">
        <div class="container">
          <h2 id="what-title">What It Is</h2>
          <p>
            Identity Anchor Protocol (IAP) defines a cryptographic standard for establishing and verifying persistent agent identity and continuity.
            The Registry implements IAP-0.1 as a Certificate Authority (CA), issuing signed certificates that third parties can verify using the Registry public key.
          </p>
      
          <ul class="feature-list">
            <li><strong>Identity Anchor</strong> — binds <code>agent_id</code> to an Ed25519 public key at a specific time.</li>
            <li><strong>Continuity</strong> — attests a specific identity-bound <code>memory_root</code> and strictly monotonic <code>ledger_sequence</code>.</li>
            <li><strong>Lineage</strong> — declares canonical parent/fork relationships between identities.</li>
          </ul>
      
          <p class="note">
            IAP does not define agent behavior, intelligence, governance, or evaluation criteria—only identity and continuity primitives.
          </p>
        </div>
      </section>

      <section id="workflow" class="section section-alt" aria-labelledby="workflow-title">
        <div class="container">
          <h2 id="workflow-title">How It Works</h2>
          <div class="flow" aria-label="Agent to registry certificate flow">
            <div class="flow-box">
              <h3>Agent</h3>
              <p>Generates an Ed25519 keypair, derives <code>agent_id</code>, and submits signed certificate requests.</p>
            </div>
            <div class="flow-arrow" aria-hidden="true">→</div>
            <div class="flow-box">
              <h3>Registry</h3>
              <p>Verifies protocol rules and agent signatures, then issues registry-signed certificates under IAP-0.1.</p>
            </div>
            <div class="flow-arrow" aria-hidden="true">→</div>
            <div class="flow-box">
              <h3>Certificate</h3>
              <p>Immutable signed attestations verifiable offline using the registry public key.</p>
            </div>
          </div>
          <ol class="steps">
            <li>Agent generates an Ed25519 keypair and derives <code>agent_id</code>.</li>
            <li>Registry issues an <strong>Identity Anchor</strong> certificate binding <code>agent_id</code> to the public key.</li>
            <li>Agent requests <strong>Continuity</strong> or <strong>Lineage</strong> certificates with an agent signature.</li>
            <li>Any verifier validates certificates offline using canonical JSON and the registry public key.</li>
          </ol>
          <pre class="code-block"><code>curl https://registry.ia-protocol.com/registry/public-key</code></pre>
        </div>
      </section>

      <section id="public-key" class="section" aria-labelledby="key-title">
        <div class="container">
          <h2 id="key-title">Registry Public Key</h2>
          <p>
            The registry exposes a canonical public verification endpoint.
          </p>
          <dl class="cert-block" aria-live="polite">
            <div>
              <dt>registry_id</dt>
              <dd id="registry-id">iap-registry-main</dd>
            </div>
            <div>
              <dt>protocol_version</dt>
              <dd id="protocol-version">IAP-0.1</dd>
            </div>
            <div>
              <dt>public_key_b64</dt>
              <dd id="public-key" class="mono">
                pending: fetch registry /registry/public-key
              </dd>
            </div>
          </dl>
        </div>
      </section>

      <section id="trust" class="section section-alt" aria-labelledby="trust-title">
        <div class="container">
          <h2 id="trust-title">Trust & Security</h2>
          <ul class="trust-list">
            <li>All certificates are signed with the registry’s Ed25519 private key (trust root).</li>
            <li>Verification uses canonical JSON and excludes <code>registry_signature_b64</code> from the signed payload.</li>
            <li>Verification MUST NOT require registry availability—offline verification is required.</li>
            <li>Certificates are immutable once issued (append-only record).</li>
            <li>Identity Anchor certificates are required prior to Continuity or Lineage issuance for an <code>agent_id</code>.</li>
            <li>Protocol behavior is pinned to <code>IAP-0.1</code> and certificate types are versioned.</li>
          </ul>
        </div>
      </section>

      <section id="spec" class="section" aria-labelledby="spec-title">
        <div class="container">
          <h2 id="spec-title">Protocol Specification</h2>
          <p>
            Canonical specification source (versioned, auditable history):
            <a
              href="https://identity-anchor-protocol.github.io/iap-spec/spec/v0.1/"
              rel="noopener noreferrer"
              >identity-anchor-protocol.github.io/iap-spec/spec/v0.1/</a
            >
          </p>
          <p>
            Version-pinned document:
            <a
              href="https://github.com/identity-anchor-protocol/iap-spec/blob/main/IAP-Protocol-Specification-v0.1.md"
              rel="noopener noreferrer"
              >IAP-Protocol-Specification-v0.1.md</a
            >
          </p>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-row">
        <div>
          <p class="footer-title">Identity Anchor Protocol</p>
          <p class="footer-meta">Registry Version: 0.2.0</p>
        </div>
        <ul class="footer-links">
          <li><a href="https://github.com/dirkm2577" rel="noopener noreferrer">GitHub</a></li>
          <li>
            <a href="https://github.com/identity-anchor-protocol/iap-spec" rel="noopener noreferrer"
              >Spec Repo</a
            >
          </li>
          <li><a href="mailto:admin@ia-protocol.com">admin@ia-protocol.com</a></li>
        </ul>
      </div>
    </footer>

    <script>
      (function () {
        var statusEl = document.getElementById("status-badge");
        var registryIdEl = document.getElementById("registry-id");
        var protocolEl = document.getElementById("protocol-version");
        var publicKeyEl = document.getElementById("public-key");
        var registryOriginMeta = document.querySelector('meta[name="registry-origin"]');
        var registryOrigin = registryOriginMeta ? registryOriginMeta.content : "";

        function requestJSON(path, onSuccess, onFail) {
          fetch(registryOrigin + path, { method: "GET", headers: { Accept: "application/json" } })
            .then(function (res) {
              if (!res.ok) throw new Error("HTTP " + res.status);
              return res.json();
            })
            .then(onSuccess)
            .catch(onFail);
        }

        requestJSON(
          "/health",
          function (data) {
            if (data && data.status === "ok") {
              statusEl.textContent = "Registry Online";
              statusEl.className = "status status-ok";
            } else {
              statusEl.textContent = "Degraded";
              statusEl.className = "status status-warn";
            }
          },
          function () {
            statusEl.textContent = "Operational";
            statusEl.className = "status status-ok";
          }
        );

        requestJSON(
          "/registry/public-key",
          function (data) {
            registryIdEl.textContent = data.registry_id || "unknown";
            protocolEl.textContent = data.protocol_version || "unknown";
            publicKeyEl.textContent = data.public_key_b64 || "unavailable";
          },
          function () {
            publicKeyEl.textContent = "unavailable: endpoint not reachable from this origin";
          }
        );
      })();
    </script>
  </body>
</html>
