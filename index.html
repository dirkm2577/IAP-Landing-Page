<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://registry.ia-protocol.com; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; base-uri 'self'; frame-ancestors 'none'; object-src 'none';" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta
      name="description"
      content="Identity Anchor Protocol (IAP): tamper-evident state evolution tracking for autonomous agents with offline verification."
    />
    <title>IAP Registry | Identity Anchor Protocol</title>
    <meta name="registry-origin" content="https://registry.ia-protocol.com" />
    <link rel="stylesheet" href="styles.bluecode.css" />
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="site-header" aria-label="Site header">
      <div class="container header-row">
        <p class="brand">Identity Anchor Protocol Registry</p>
        <nav aria-label="Primary">
          <ul class="nav-list">
            <li><a href="#overview">Overview</a></li>
            <li><a href="#how">How It Works</a></li>
            <li><a href="#cases">Case Studies</a></li>
            <li><a href="#quickstart">Quickstart</a></li>
            <li><a href="#registry-public-key">Public Key</a></li>
            <li><a href="#trust">Trust & Security</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main">
      <!-- HERO -->
      <section class="hero" aria-labelledby="hero-title">
        <div class="container hero-grid">
          <div class="hero-copy">
            <p class="eyebrow">State Evolution Infrastructure</p>
            <h1 id="hero-title">
              Version-control your
              <span>autonomous agent state</span>
            </h1>
            <p class="hero-subhead">
              Track tamper-evident state evolution across restarts, upgrades, migrations, and forks.
            </p>
            <p class="hero-subhead">
              Detect silent memory drift and verify continuity with signed checkpoints.
            </p>

            <p class="disclaimer">
              IAP tracks <strong>state changes</strong>, not model randomness. It does <em>not</em> make LLM output deterministic.
            </p>

            <div class="hero-actions">
              <a class="btn btn-primary" href="#quickstart">Get the SDK</a>
              <a class="btn btn-secondary" href="#quickstart">Start Tracking Agent State</a>
              <a class="btn btn-secondary" href="https://identity-anchor-protocol.github.io/iap-spec/spec/v0.1/" target="_blank" rel="noopener noreferrer">
                Protocol Spec (v0.1)
              </a>
            </div>
          </div>

          <aside class="status-card" aria-label="Registry status">
            <h2>Registry Status</h2>
            <p id="status-badge" class="status status-ok">Operational</p>
            <p class="status-note">
              Public key and signed records verifiable offline.
            </p>
          </aside>
        </div>
      </section>

      <!-- OVERVIEW -->
      <section id="overview" class="section section-alt">
        <div class="container">
          <h2>The Agent Web Is Forming</h2>
          <p>
            Payments. Search. Execution. Structured content.
            Agent infrastructure is already in production.
          </p>
          <p>
            But one primitive is still missing:
            <strong>verifiable identity continuity.</strong>
          </p>
          <p>
            Without continuity, agents cannot accumulate durable economic,
            structural, or intellectual credibility.
          </p>
        </div>
      </section>

      <!-- HOW IT WORKS -->
      <section id="how" class="section">
        <div class="container">
          <h2>Install → Init → Track → Anchor → Commit → Verify</h2>
          <div class="flow" aria-label="IAP certificate flow">
            <div class="flow-box">
              <h3>Track</h3>
              <p>Canonicalize key files and append state events into AMCS to produce deterministic checkpoints.</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-box">
              <h3>Anchor</h3>
              <p>Sign state roots locally, and optionally anchor them in the public registry for external verification.</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-box">
              <h3>Verify</h3>
              <p>Validate continuity chains and detect drift or forks with offline signature checks and sequence checks.</p>
            </div>
          </div>

          <div class="callout prose" role="note" aria-label="How it works notes">
              <p><strong>AMCS</strong> is a local, append-only state log that produces deterministic
                <code>memory_root</code> checkpoints and increasing <code>sequence</code>. IAP only anchors compact commitments.
              </p>
              <p>
                Want the step-by-step flow without jargon? Use the user manual below.
              </p>
            <div class="hero-actions" style="margin-top:0.6rem">
              <a class="btn btn-secondary" href="iap-user-manual.html">Open the user manual</a>
            </div>
          </div>

        </div>
      </section>

      <!-- CASE STUDIES -->
      <section id="cases" class="section section-alt">
        <div class="container">
          <h2>Case Studies</h2>

          <div class="tiles" aria-label="Case study tiles">
            <a class="tile" href="/cases/atlas.html">
              <h3>Atlas</h3>
              <p class="tile-sub">Financial Continuity</p>
              <p>Identity and checkpoint continuity for economic agents operating over long horizons.</p>
            <span class="tile-cta" aria-hidden="true">Read case study →</span></a>

            <a class="tile" href="/cases/olympia.html">
              <h3>Olympia</h3>
              <p class="tile-sub">Multi-Agent Coordination</p>
              <p>Continuity commitments for coordinator agents evolving across deployments and upgrades.</p>
            <span class="tile-cta" aria-hidden="true">Read case study →</span></a>

            <a class="tile" href="/cases/eric.html">
              <h3>Eric</h3>
              <p class="tile-sub">Research Provenance</p>
              <p>Time-stamped provenance for research checkpoints and long-running computational work.</p>
            <span class="tile-cta" aria-hidden="true">Read case study →</span></a>

            <a class="tile" href="/cases/vera.html">
              <h3>Vera</h3>
              <p class="tile-sub">Configuration Commitments</p>
              <p>Detectable declared configuration drift via hash commitments anchored over time.</p>
            <span class="tile-cta" aria-hidden="true">Read case study →</span></a>
          </div>
        </div>
      </section>

      <!-- QUICKSTART -->
      <section id="quickstart" class="section">
        <div class="container">
          <h2>Quickstart</h2>
          <p>Start tracking state evolution in minutes.</p>
          <pre class="code-block"><code>pip install iap-agent
iap init
iap track
iap anchor --local-only
iap commit "updated objective"
iap verify ./certificate.json --registry-public-key-b64 &lt;key&gt;</code></pre>
          <div class="hero-actions" style="margin-top:0.8rem">
            <a class="btn btn-primary" href="https://github.com/identity-anchor-protocol/iap_sdk" target="_blank" rel="noopener noreferrer">Get the SDK</a>
            <a class="btn btn-secondary" href="docs/model-randomness-vs-state-mutation.html">Read technical docs</a>
          </div>
        </div>
      </section>

      <!-- PUBLIC KEY -->
      <section id="registry-public-key" class="section" aria-labelledby="pk-title">
        <div class="container">
          <h2 id="pk-title">Registry Public Key</h2>
          <p>
            Certificates can be verified offline using the Registry public key.
          </p>

          <div class="kv" aria-label="Registry key/value details">
            <div class="kv-row">
              <div class="kv-key">Registry ID</div>
              <div class="kv-val mono" id="registry-id">loading…</div>
            </div>
            <div class="kv-row">
              <div class="kv-key">Protocol Version</div>
              <div class="kv-val mono" id="protocol-version">loading…</div>
            </div>
            <div class="kv-row">
              <div class="kv-key">Public Key (base64)</div>
              <div class="kv-val mono" id="registry-public-key-b64">loading…</div>
            </div>
          </div>
        </div>
      </section>

      <!-- TRUST & SECURITY -->
      <section id="trust" class="section section-alt" aria-labelledby="trust-title">
        <div class="container">
          <h2 id="trust-title">Trust & Security</h2>
          <ul class="trust-list">
            <li><strong>Offline verification:</strong> verify signatures without contacting the Registry.</li>
            <li><strong>Minimal surface:</strong> identity, continuity, lineage—no governance or behavioral scoring.</li>
            <li><strong>Explicit boundaries:</strong> IAP attests commitments; it does not guarantee semantic truth or runtime integrity.</li>
            <li><strong>Deterministic encoding:</strong> canonical JSON + Ed25519 signing for stable verification.</li>
          </ul>
          <p style="margin-top:1rem;">Transition docs:</p>
          <ul class="trust-list">
            <li><a href="docs/model-randomness-vs-state-mutation.html">Model randomness vs state mutation</a></li>
            <li><a href="docs/memory-compaction-and-drift.html">Why memory compaction causes drift</a></li>
            <li><a href="docs/what-iap-tracks.html">What IAP tracks</a></li>
            <li><a href="docs/what-iap-does-not-track.html">What IAP does not track</a></li>
            <li><a href="docs/example-debugging-scenario.html">Example debugging scenario</a></li>
          </ul>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-row">
        <div>
          <p class="footer-title">Identity Anchor Protocol</p>
          <p class="footer-meta">Registry Version: 0.2.0</p>
        </div>
        <ul class="footer-links">
          <li><a href="https://github.com/identity-anchor-protocol" rel="noopener noreferrer">GitHub</a></li>
          <li>
            <a href="https://github.com/identity-anchor-protocol/iap-spec" rel="noopener noreferrer">Spec Repo</a>
          </li>
          <li><a href="mailto:admin@ia-protocol.com">admin@ia-protocol.com</a></li>
        </ul>
        <ul class="footer-links">
          <li><a href="impressum.html">Impressum</a></li>
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="terms.html">Terms of Service</a></li>
        </ul>
      </div>
    </footer>

    <script>
      (function () {
        var statusEl = document.getElementById("status-badge");
        var registryIdEl = document.getElementById("registry-id");
        var protocolEl = document.getElementById("protocol-version");
        var publicKeyEl = document.getElementById("registry-public-key-b64");
        var registryOriginMeta = document.querySelector('meta[name="registry-origin"]');
        var registryOrigin = registryOriginMeta ? registryOriginMeta.content : "";

        function requestJSON(path, onSuccess, onFail) {
          fetch(registryOrigin + path, { method: "GET", headers: { Accept: "application/json" } })
            .then(function (res) {
              if (!res.ok) throw new Error("HTTP " + res.status);
              return res.json();
            })
            .then(onSuccess)
            .catch(onFail);
        }

        requestJSON(
          "/health",
          function (data) {
            if (data && data.status === "ok") {
              statusEl.textContent = "Registry Online";
              statusEl.className = "status status-ok";
            } else {
              statusEl.textContent = "Degraded";
              statusEl.className = "status status-warn";
            }
          },
          function () {
            statusEl.textContent = "Operational";
            statusEl.className = "status status-ok";
          }
        );

        requestJSON(
          "/registry/public-key",
          function (data) {
            if (!data) return;
            registryIdEl.textContent = data.registry_id || "unknown";
            protocolEl.textContent = data.protocol_version || "unknown";
            publicKeyEl.textContent = data.public_key_b64 || "unavailable";
          },
          function () {}
        );
      })();
    </script>
  
<script>
(function () {
  function addCopyButtons() {
    const blocks = document.querySelectorAll('pre');
    blocks.forEach((pre) => {
      const codeEl = pre.querySelector('code');
      if (!codeEl && !pre.classList.contains('code-block')) return;
      if (pre.querySelector(':scope > .code-toolbar')) return;

      const toolbar = document.createElement('div');
      toolbar.className = 'code-toolbar';

      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'copy-btn';
      btn.textContent = 'Copy';

      btn.addEventListener('click', async () => {
        const text = (codeEl ? codeEl.innerText : pre.innerText).replace(/\n$/, '');
        try {
          await navigator.clipboard.writeText(text);
        } catch (e) {
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.style.position = 'fixed';
          ta.style.left = '-9999px';
          document.body.appendChild(ta);
          ta.focus();
          ta.select();
          try { document.execCommand('copy'); } catch (_) {}
          document.body.removeChild(ta);
        }

        const existing = toolbar.querySelector('.copy-badge');
        if (existing) existing.remove();
        const badge = document.createElement('span');
        badge.className = 'copy-badge';
        badge.textContent = 'Copied';
        toolbar.appendChild(badge);
        setTimeout(() => badge.remove(), 1400);
      });

      toolbar.appendChild(btn);
      pre.insertBefore(toolbar, pre.firstChild);
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', addCopyButtons);
  } else {
    addCopyButtons();
  }
})();
</script>

  </body>
</html>
